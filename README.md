# Ormlite SQL In-flight Modification Demo
Demonstration of OrmLite extensions to modify generated SQL before being sent to DB server


Ormlite uses the configured Dialect Provider to create and evaluate `SqlExpression<T>` object.  By overriding the 
creation of these to create a specific sub-class of `SqlExpression<T>`, then overriding  the `ToSelectStatement()`, we can 
modify the SQL generated by OrmLite before it is executed on the DB.

In this scenario, let us imagine we have an organizational hierarchy stored in `Organization`.  Each record in the 
`Organization` table represents some logical group (region, state, sales-footprint, country, etc.), and may belong to
a single parent organization.  A denormalized read-only table `OrganizationDRO` stores every combination of organization, 
itself, and its children.

OrmLite will work as normal until the extension method `.WithOrganization(long?)` is called.  This method specifies
which specific level / subtree that we are querying.  During the `SELECT ...` statement generation, a Microsoft
[TSqlParser](https://learn.microsoft.com/en-us/dotnet/api/microsoft.sqlserver.transactsql.scriptdom.tsql160parser?view=sql-dacfx-161) 
is used to parse the query and find references to named tables.  The named table reference is replaced with 
an automatically generated subquery.

*Note: the subquery currently uses a hardcoded organization value.  Ideally this organization value would use a parameter.
